2013.06.04
=========================================================================

# 다음 스터디 목표 - 2013.06.11.
* [커뮤니케이션중요], [선행학습금지], [복습독려].
- `모던 웹을 위한 Node.js 프로그래밍` 10장할꺼임.([선행학습금지])

 [커뮤니케이션중요]: http://www.jiniya.net/wp/archives/10554
 [선행학습금지]: http://blog.daum.net/romuromu/286
 [복습독려]: http://blog.naver.com/danah_m/20155427215

--------------------------------------------------------------------------------
# study 요약.

## 이야기를 나누다 나온 꿀팁 모음.
* 코딩가이드
 - [node-style-guide] : nodejs 코딩 스타일 가이드.
 - [자연스럽고 일관성 있게 자바스크립트 코딩하는 원칙] : [개발자 영어]에서 번역한 문서.
 - 덧) 코딩 가이드는 가이드일 뿐이고, 이유있는 규칙과 공감대형성이 중요.
* [reveal.js](https://github.com/hakimel/reveal.js/) : Markdown문법, 웹 ppt를 가능케함.
 - ex) http://lab.hakim.se/reveal-js/#/
* [github:forever] : 서비스를 살리고, 죽이고, 모니터하는 용도.
 - 참조) [node.js 앱의 인스턴스를 관리해 주는 forever](http://blog.outsider.ne.kr/590)
* [github:node-restify] : 경량 웹프레임 워크.
 - 참조) http://blog.perfectapi.com/2012/benchmarking-apis-using-perfectapi-vs-express.js-vs-restify.js/
* [github:node-templates] : template 언어 비교.
* http://nodeconf.kr/2012/ : 2012년 11월 20일, 국내 첫 Node.js 컨퍼런스.(발표자료)
 - 추천 : [웹 기반 협업 소프트웨어는 Node.js](http://www.slideshare.net/youngteac/operational-transformation-in-nodejs)
* [Pinterest(핀터레스트) 이야기](http://rapapa.net/?p=217)
 - 핀터레스트(Pinterest)는 핀보드 스타일의 소셜 사진 공유 웹사이트.

 [node-style-guide]: https://github.com/felixge/node-style-guide
 [개발자 영어]: http://www.engfordev.com 
 [자연스럽고 일관성 있게 자바스크립트 코딩하는 원칙]:  https://github.com/rwldrn/idiomatic.js/tree/master/translations/ko_KR
 [github:forever]: https://github.com/nodejitsu/forever
 [github:node-restify]: http://mcavage.github.io/node-restify/
 [github:node-templates]: http://paularmstrong.github.io/node-templates/

--------------------------------------------------------------------------------

## ch09. Express 프레임워크.

### HelloExpress
* 프로젝트 생성 : `mkdir HelloExpress`
* 다음 내용일 입력
 - 참조) [express], [swig], [github:npm-json.dependencies]

package.json
        
```json
{
  "name": "HelloExpress",
  "dependencies": {
    "express": "*"
  }
}
```

main.js

```javascript
// modules
var express = require('express');
var app = express();

// vars
var g_port = 8080;

// main
app.get('/', function (req, res) {
  res.send('Hello World');
});

app.listen(g_port);
```

* 의존되는 모듈 설치 : `npm install`

* 서버 실행 : `node app`


### app.settings
- 참조) http://expressjs.com/api.html#app-settings
- `env` : 어플리케이션 환경 모드. 기본값은 process.env.NODE_ENV이거나 "development".
- `case sensitive routing` : false면 `/Foo`와 `/foo`를 같다고봄. 기본값은 false.

### .swig 렌더링
- 참조) [swig], [github:consolidate.js]

```tree
HelloExpress
|--main.js
|--packages.json
|--pages
    |-- test-swig.swig
```

packages.json
```json
{
    "name": "HelloExpress",
    "dependencies": {
	"express": "*",
	"swig": "*",
	"consolidate": "*"
    }
}
```

HelloExpress/main.js
```javascript
// modules
var express = require('express');
var cons = require('consolidate');
var swig = require('swig');

// vars
var g_port = 8080;
var g_page_dir = __dirname + '/pages';

// app setting
var app = express();
app.set('view engine', 'swig');
app.set('views', g_page_dir);
app.engine('swig', cons.swig);

swig.init({
    root: g_page_dir,
    allowErrors: true,
    autoescape: false
});

// main
app.get('/test-swig', function (req, res) {
    res.render('test-swig', {
	pagename: 'awesome people',
	authors: ['Paul', 'Jim', 'Jane']
    });
});

app.listen(g_port);
```

HelloExpress/pages/test-swig.swig
```swig
<h1>{{ pagename|title }}</h1>
<ul>
{% for author in authors %}
  <li{% if loop.first%} class="first"{% endif %}>
    {{ author }}
  </li>
{% else %}
  <li>There are no authors.</li>
{% endfor %}
</ul>
```

결과 html : `127.0.0.1:8080/test-swig`
```html
<h1>Awesome People</h1>
<ul>

  <li class="first">
    Paul
  </li>

  <li>
    Jim
  </li>

  <li>Jane
  </li>

</ul>
```

### 폴더를 사용한 페이지 분류
### 레이아웃 페이지
### Express response 객체
`connect`모듈 확장.
res.redirect('http://www.google.com');

### 쿠키생성
### Express request 객체
var user_agent = req.header('User-Agent');
var param = req.param('id');

console.log('user_agent', user_agent);
console.log('param', user_agent);

### marked

### cookie
- expires, maxAge 차이점은??
- [wiki:HTTP_cookie#Expires_and_Max-Age]
- [blog:cookies-max-age-vs-expires]

--------------------------------------------------------------------------------

# 느낀점
- jade는 쓰래기인듯...
- 복습안하면 다음주, 10장할때 곤란할듯...
- wifi가 불안한것만 빼면, 오늘 스터디 장소 괜찮은듯. 스터디 시간도 여유를 가지면서 진행한것같고.

--------------------------------------------------------------------------------

 [express]: http://expressjs.com/
 [express:app.configure]: http://expressjs.com/api.html#app.configure
 [github:npm-json.dependencies]: https://github.com/isaacs/npm/blob/master/doc/cli/json.md#dependencies
 [swig]: http://paularmstrong.github.io/swig/
 [github:consolidate.js]: https://github.com/visionmedia/consolidate.js/

 [wiki:HTTP_cookie#Expires_and_Max-Age]: http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age
 [blog:cookies-max-age-vs-expires]: http://mrcoles.com/blog/cookies-max-age-vs-expires/